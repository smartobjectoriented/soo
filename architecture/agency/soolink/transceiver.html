<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2.2.2.2. Transceiver logical block &mdash; Smart Object Oriented 2021.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/style.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/theme_overrides.css?v=7751120a" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/documentation_options.js?v=b4aaf8b5"></script>
        <script src="../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="2.2.2.3. Plugins management" href="plugins.html" />
    <link rel="prev" title="2.2.2.1. Transcoder logical block" href="transcoder.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Smart Object Oriented
          </a>
              <div class="version">
                2021.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../architecture.html">2. SOO Architecture</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../overall.html">2.1. Overall framework architecture</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../agency.html">2.2. Agency</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../core/core.html">2.2.1. Core subsystem</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="soolink.html">2.2.2. SOOlink subsystem</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="transcoder.html">2.2.2.1. Transcoder logical block</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">2.2.2.2. Transceiver logical block</a></li>
<li class="toctree-l4"><a class="reference internal" href="plugins.html">2.2.2.3. Plugins management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../agency.html#vbus-and-vbstore">2.2.3. VBus and VBstore</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ME/ME.html">2.3. Mobile Entity (ME)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../virt_interfaces/virt_interfaces.html">2.4. Virtualized interfaces (backend/frontend)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../drivers/drivers.html">3. Frontend &amp; backend drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rootfs/rootfs.html">4. User applications and rootfs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide.html">5. User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../logging.html">6. Logging facility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../logging.html#enabling-initcall-logging">7. Enabling <code class="docutils literal notranslate"><span class="pre">initcall</span></code> logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../board_issues.html">8. Board related issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../aarch64.html">9. Configuration for AArch64 64-bit architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_flow.html">10. Development  flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">11. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ME/ME.html">12. Mobile Entities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../demos/demos.html">13. Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../coding_conventions.html">14. Coding conventions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Smart Object Oriented</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../architecture.html"><span class="section-number">2. </span>SOO Architecture</a></li>
          <li class="breadcrumb-item"><a href="../agency.html"><span class="section-number">2.2. </span>Agency</a></li>
          <li class="breadcrumb-item"><a href="soolink.html"><span class="section-number">2.2.2. </span>SOOlink subsystem</a></li>
      <li class="breadcrumb-item active"><span class="section-number">2.2.2.2. </span>Transceiver logical block</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="transceiver-logical-block">
<span id="transceiver"></span><h1><span class="section-number">2.2.2.2. </span>Transceiver logical block<a class="headerlink" href="#transceiver-logical-block" title="Link to this heading">¶</a></h1>
<p>The transceiver is responsible to broadcast data packets handled by the <a class="reference internal" href="transcoder.html#transcoder"><span class="std std-ref">transcoder</span></a> to the neighbourhood
in the most convenient way. It relies on a datalink protocol which is used to take into account the properties of the underlying
plugin interface.</p>
<section id="winenet-datalink-protocol">
<h2><span class="section-number">2.2.2.2.1. </span>Winenet datalink protocol<a class="headerlink" href="#winenet-datalink-protocol" title="Link to this heading">¶</a></h2>
<p>Winenet is the datalink protocol used with WLan (Wifi) transmission. Its main purpose is to allow smart objects to send
their MEs without interfering with each other. In this perspective, Winenet gives the hand to each smart object one after
the other after transmitting a certain number of packets contained in a frame. Each frame is sent to each smart object giving
the impression that packets are broadcast. We called this approach <em>Unibroad</em> (combining Unicast and broadcast).</p>
<p>Compared to another datalink protocol based on routing mechanisms, Winenet is much simpler since it is based on the neighbourhood.
Each smart object (SOO) is periodically broadcasting a <em>Discovery</em> beacon and can be recognized by all SOOs which are in the light of
sight.</p>
<p>Each SOO has various information related to its state and the neighbourhood:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">randnr</span></code> is a random number which is determined during the <em>PING</em> procedure and will be used in case of simultaneous actions with
a same beacon. The greater value has the advantage and the SOO with the lower value will abort the transaction.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">paired</span> <span class="pre">speaker</span></code> is the <em>agencyUID</em> of the SOO which is designated as speaker. The SOO is listening at this specific speaker which
transmits MEs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">valid</span></code> is set to true during the <em>PING</em> procedure.</p></li>
</ul>
<section id="beacons">
<h3><span class="section-number">2.2.2.2.1.1. </span>Beacons<a class="headerlink" href="#beacons" title="Link to this heading">¶</a></h3>
<p>The following beacons are used in Winenet. The beacon has a <code class="docutils literal notranslate"><span class="pre">cause</span></code> field which may contain some details related to the beacon.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Definition</p></th>
<th class="head"><p>Cause</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>PING</em></p></td>
<td><p>Used to consider a neighbour as <em>valid</em></p></td>
<td><p>REQUEST / RESPONSE</p></td>
</tr>
<tr class="row-odd"><td><p><em>QUERY</em></p></td>
<td><p>Used to exchange the SOO internal state</p></td>
<td><p>REQUEST / RESPONSE</p></td>
</tr>
<tr class="row-even"><td><p><em>ACKNOWLEDGMENT</em></p></td>
<td><p>When a beacon or send of frames require an acknowledgment</p></td>
<td><p>OK / TIMEOUT / ABORT</p></td>
</tr>
<tr class="row-odd"><td><p><em>GO SPEAKER</em></p></td>
<td><p>When a speaker wants another neighbour to get speaker</p></td>
<td><p>(empty)</p></td>
</tr>
<tr class="row-even"><td><p><em>BROADCAST SPEAKER</em></p></td>
<td><p>Ask the neighbours to get paired with us (before sending frames)
If the cause is <em>abort</em>, the SOO gets unpaired.</p></td>
<td><p>(empty) / abort</p></td>
</tr>
</tbody>
</table>
<p>Only <em>GO SPEAKER</em> and <em>BROADCAST SPEAKER</em> beacons require an acknowledgment.</p>
<p>There are four main states: <code class="docutils literal notranslate"><span class="pre">INIT</span></code>, <code class="docutils literal notranslate"><span class="pre">IDLE</span></code>, <code class="docutils literal notranslate"><span class="pre">SPEAKER</span></code> and <code class="docutils literal notranslate"><span class="pre">LISTENER</span></code>.</p>
<p>State <em>INIT</em> is used at the beginning until the <em>Discovery</em> protocol insert the smart object in the neighbourhood.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Each smart object is also considered as <em>neighbour</em>, however it remains with the <code class="docutils literal notranslate"><span class="pre">valid</span></code> attribute to false.</p>
</div>
</section>
<section id="init-state">
<h3><span class="section-number">2.2.2.2.1.2. </span>INIT state<a class="headerlink" href="#init-state" title="Link to this heading">¶</a></h3>
<p>Then, the state <em>IDLE</em> is a temporary state until a first neighbour is discovered.</p>
<p>When a neighbour appears, a <em>PING</em> procedure is automatically triggered as follows: the SOO with the lower <code class="docutils literal notranslate"><span class="pre">agencyUID</span></code> sends
a <code class="docutils literal notranslate"><span class="pre">PING</span> <span class="pre">REQUEST</span></code> to the other. Then, the other SOO will answer with a <code class="docutils literal notranslate"><span class="pre">PING</span> <span class="pre">RESPONSE</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Everytime a beacon is sent out to another SOO, its internal state is sent with the beacon. The internal state is made of
the <code class="docutils literal notranslate"><span class="pre">paired</span> <span class="pre">speaker</span></code> and a <code class="docutils literal notranslate"><span class="pre">randnr</span></code> random number.</p>
</div>
</section>
<section id="listener-state">
<h3><span class="section-number">2.2.2.2.1.3. </span>LISTENER state<a class="headerlink" href="#listener-state" title="Link to this heading">¶</a></h3>
<p>The SOO with at least one neighbour is put to the <em>LISTENER</em> state after triggering a <code class="docutils literal notranslate"><span class="pre">QUERY</span></code> procedure.
A <code class="docutils literal notranslate"><span class="pre">QUERY</span> <span class="pre">REQUEST</span></code> beacon is sent to the first neighbour. The SOO will be able to determine if it has to
switch to the <em>SPEAKER</em> state at the receival of <code class="docutils literal notranslate"><span class="pre">QUERY</span> <span class="pre">RESPONSE</span></code> beacon.</p>
<p>The <em>QUERY</em> procedure is also used as a consolidation mechanism to make sure the speaker is still a <em>true</em> speaker,
and if it is not the case to re-activate a speaker in any case.</p>
<p>Depending on the value of <em>paired speaker</em>, the SOO can answer to <code class="docutils literal notranslate"><span class="pre">GO</span> <span class="pre">SPEAKER</span></code> or <code class="docutils literal notranslate"><span class="pre">BROADCAST</span> <span class="pre">SPEAKER</span></code> beacon.</p>
</section>
<section id="speaker-state">
<h3><span class="section-number">2.2.2.2.1.4. </span>SPEAKER state<a class="headerlink" href="#speaker-state" title="Link to this heading">¶</a></h3>
<p>This state enables the transmission of a pending buffer (typically a ME).
The buffer comes from the <em>transcoder</em> layer which actually splits the buffer in <code class="docutils literal notranslate"><span class="pre">packets</span></code>. Winenet is buffering
a certain number of packets to have a <code class="docutils literal notranslate"><span class="pre">frame</span></code>. The frame (with multiple packets) is sent out to each SOO and requires
to be acknowledged.</p>
</section>
</section>
<section id="parameters">
<h2><span class="section-number">2.2.2.2.2. </span>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">¶</a></h2>
<p>The following constants/values are defined and used by the datalink protocol.</p>
<section id="acknowledgment-related-constants">
<h3><span class="section-number">2.2.2.2.2.1. </span>Acknowledgment related constants<a class="headerlink" href="#acknowledgment-related-constants" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>WNET_ACK_TIMEOUT_MS</em></p></td>
<td><p>Delay in ms to receive a ACK beacon when required</p></td>
</tr>
<tr class="row-odd"><td><p><em>WNET_RETRIES_MAX</em></p></td>
<td><p>Number of max retries to send a packet when no ack is received</p></td>
</tr>
<tr class="row-even"><td><p><em>WNET_LISTENER_TIMEOUT_MS</em></p></td>
<td><p>Delay in ms during which a beacon must be received</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="transcoder.html" class="btn btn-neutral float-left" title="2.2.2.1. Transcoder logical block" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="plugins.html" class="btn btn-neutral float-right" title="2.2.2.3. Plugins management" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, HEIG-VD - REDS Institute.
      <span class="lastupdated">Last updated on 08 Jul 2024, 16:43.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>